import { useState, useEffect, useRef } from "react";
import { ImageOrSvg } from "../ImageorSvg/imageOrSvg";
import styles from "./footer.module.scss";
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/dist/ScrollTrigger";

export const Footer = ({ footer, parallax }) => {
  const {
    contactHeadline,
    contactEmail,
    phone,
    footerIcon,
    instagramLink,
    mailchimpLink,
  } = footer.fields;
  const [email, setEmail] = useState("");
  const socialContainer = useRef(null);
  const socialFooter = useRef();

  const submitHandler = (event) => {
    event.preventDefault();
  };

  useEffect(() => {
    gsap.registerPlugin(ScrollTrigger);
    gsap.to(socialContainer.current, {
      y: "0",
      scrollTrigger: {
        start: "top 80%",
        trigger: socialFooter.current,
        duration: 0.5,
      },
    });
  }, [socialContainer, socialFooter]);

  const renderSocial = () => {
    return (
      <div className={styles.socials}>
        {instagramLink && (
          <a
            target="_blank"
            href={instagramLink}
            aria-label={instagramLink}
            title={instagramLink}
            rel="noreferrer"
          >
            <div className={styles.socialIconContianer}>
              <svg viewBox="0 0 24 24">
                <path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z" />
              </svg>
            </div>
          </a>
        )}
      </div>
    );
  };
  return (
    <>
      <footer id="#footer" className={styles.footer}>
        <div className={styles.footerBody}>
          <h2 className={styles.headline}>{contactHeadline}</h2>
          {contactEmail && (
            <p className={styles.bodyText}>
              <a
                target="_blank"
                href={`mailto:${contactEmail}`}
                aria-label={contactEmail}
                title={contactEmail}
                rel="noreferrer"
              >
                {contactEmail}
              </a>
            </p>
          )}
          {phone && (
            <p className={styles.bodyText}>
              <a
                target="_blank"
                href={`tel:${phone}`}
                aria-label={phone}
                title={phone}
                rel="noreferrer"
              >
                {phone}
              </a>
            </p>
          )}

          {mailchimpLink && (
            <div className={styles.emailBody}>
              <h2 className={styles.emailText}>sign up for our email</h2>
              <form onSubmit={submitHandler} className={styles.inputContainer}>
                <div>
                  <input
                    value={email}
                    placeholder="youremail@email.com"
                    type="email"
                    required
                    id="email"
                    name="email"
                    onChange={(e) => setEmail(e.target.value)}
                  />
                  <button type="submit">SUBMIT</button>
                </div>
              </form>
            </div>
          )}
          <a href="#" target="blank" aria-label="work-shop" title="work-shop">
            <div className={styles.workShopLink}>
              <svg viewBox="0 0 266 37">
                <path
                  d="M30.4857 24.5937C30.8348 25.1067 31.1777 25.6447 31.5143 26.164C32.5056 27.7156 33.5155 29.2922 34.8996 30.5747C35.8222 31.4319 37.0753 31.9011 38.422 31.9011L38.5529 31.9011C40.1239 31.8698 41.695 31.2129 42.7673 30.1368L42.8234 30.0742C45.1924 27.6217 44.3508 23.968 43.5154 21.428C43.2286 20.5646 42.8982 19.7137 42.5678 18.8879L42.5366 18.9004L42.4119 18.55L42.4306 18.55C41.7823 16.9046 41.1027 15.2467 40.3484 13.4073C40.2361 13.1258 40.1177 12.8505 39.9805 12.5315C39.2574 10.8235 38.5092 9.05293 38.4718 7.18854C38.4594 6.61295 38.5778 6.13747 38.8085 5.7746C39.1451 5.25533 39.7374 4.94251 40.3858 4.94251L40.3982 4.94251C40.9282 4.94251 41.4207 5.21153 41.7636 5.62445C42.0129 5.93101 42.3932 6.43778 42.9481 7.26361L43.2099 7.6515L47.6799 5.16774L47.4493 4.72354C46.8071 3.47853 44.9992 0.544302 41.9755 0.0813333C41.5703 0.0187698 41.1588 -0.0125119 40.7474 -0.0125119C37.5928 -0.0125119 34.8746 1.78931 33.9769 4.47328C33.3036 6.50034 33.4283 8.82144 34.3696 11.7932C35.0118 13.814 35.8971 15.791 36.7512 17.6992C37.3871 19.1194 38.0479 20.5896 38.6028 22.0724L38.8584 22.7543C39.0392 23.236 39.2262 23.7303 39.4007 24.2183C39.5691 24.7 39.8496 25.5071 39.488 26.1202C39.3322 26.3767 39.0267 26.5519 38.6651 26.5957C38.5903 26.602 38.5092 26.6082 38.4344 26.6082C37.2437 26.6082 36.4457 25.5384 35.8846 24.6062C35.6477 24.2183 35.417 23.8241 35.1863 23.4363L35.1115 23.3049C34.5317 22.3226 33.927 21.3091 33.2911 20.3206C32.6552 19.3321 32.0006 18.3498 31.3647 17.4051L31.0343 16.9046C30.2113 15.6721 29.4383 14.5085 28.3348 13.2947C27.381 12.2374 26.2837 11.1926 24.7625 10.6858C24.3261 10.5419 23.8336 10.4606 23.3411 10.4606C22.2751 10.4606 21.2402 10.7984 20.492 11.3928C19.2202 12.4063 19.1142 14.0455 19.1704 14.9401C19.2514 16.304 19.6691 17.6053 20.093 18.8191C21.1591 21.8722 22.1878 24.5249 23.2289 26.921L23.3037 27.09C23.8523 28.3475 24.2825 29.3485 24.5256 30.556C24.588 30.8563 24.5132 31.1753 24.3199 31.4506C24.0518 31.8385 23.5843 32.1075 23.0419 32.1889C21.8137 32.3766 20.4796 31.6884 19.0768 30.1368C18.8212 29.8553 18.5781 29.5862 18.3287 29.3235C17.4559 28.3788 16.633 27.4841 15.8163 26.3329C15.3986 25.7386 15.2303 25.4633 15.1679 25.3382L15.1305 25.2694L15.1555 25.1943C15.2116 25.0379 15.2614 24.8752 15.3238 24.6813C16.4522 21.1777 16.633 17.2738 15.8412 13.6951C14.9123 9.50964 12.9173 5.6745 10.3613 3.18448C8.93359 1.78931 7.38125 1.05107 5.86631 1.05107C4.98727 1.05107 4.14563 1.29506 3.37257 1.78306C2.78031 2.15844 2.25663 2.70274 1.86387 3.36591C1.02847 4.76108 0.741689 6.46906 0.953656 8.75262C1.44617 14.0017 4.03341 19.4447 8.64058 24.9315L8.75903 25.0754L8.7341 25.0942C8.44732 25.3382 8.1356 25.5446 7.79895 25.7136C5.65434 26.8084 3.98354 27.1212 1.20926 27.6405L-0.012665 27.872L0.779094 32.3265L1.26537 32.2577C5.56082 31.6446 8.1356 30.9751 10.4361 29.8615C10.8538 29.6613 11.153 29.5049 11.5146 29.2672L11.6455 29.1796L11.7515 29.2984C12.1817 29.7864 12.8238 30.581 13.1729 31.0064C15.5856 34.0095 17.936 36.1491 21.5706 36.8373C23.2601 37.1627 24.9683 36.9875 26.4957 36.3306C27.7987 35.7738 29.0268 34.4975 29.4196 33.2962C29.9931 31.5382 29.4196 29.9804 28.8585 28.4789C28.7525 28.1973 28.6528 27.9283 28.5593 27.653C27.9234 25.8137 27.088 23.6677 26.265 21.7783L25.9346 21.0213C25.4172 19.8263 24.8748 18.5876 24.3074 17.3801L24.27 17.305C24.0269 16.8108 23.7464 16.1288 24.0768 15.9474C24.4197 15.7535 24.7937 16.1414 25.1117 16.5793C26.2276 18.1184 27.2875 19.7388 28.3036 21.3091C29.0019 22.3852 29.7251 23.4988 30.4732 24.5874L30.4857 24.5937ZM10.9909 19.8389C10.8288 19.6324 10.6667 19.4259 10.5109 19.2195C10.1992 18.8066 9.89991 18.3811 9.61314 17.962C9.04581 17.1236 8.51589 16.2477 8.04208 15.3656C7.26903 13.9266 6.60819 12.4439 6.08451 10.9549C5.8102 10.1916 5.55459 9.44082 5.37379 8.67754C5.20547 7.96432 5.04337 7.14474 5.18053 6.41901C5.22417 6.18126 5.30522 6.01234 5.42367 5.89347C5.6107 5.70578 5.83513 5.60568 6.09074 5.60568C6.67053 5.60568 7.18798 6.08742 7.33137 6.23757C7.87376 6.79439 8.30393 7.51387 8.68422 8.21458C9.03334 8.85898 9.34506 9.54718 9.63807 10.3292C9.87498 10.9549 10.0932 11.6431 10.3176 12.4251C10.7415 13.9266 11.0096 15.1904 11.153 16.3979C11.2777 17.4302 11.34 18.5 11.3587 19.7638L11.3587 20.3018L11.0034 19.8514L10.9909 19.8389Z"
                  fill="black"
                />
                <path
                  d="M198.146 15.6283L181.126 15.6283L181.126 2.12091L176.35 2.12091L176.35 33.9281L181.126 33.9281L181.126 20.4207L198.146 20.4207L198.146 33.9281L202.921 33.9281L202.921 2.12091L198.146 2.12091L198.146 15.6283Z"
                  fill="black"
                />
                <path
                  d="M63.746 1.44522C54.6189 1.44522 47.1938 8.89652 47.1938 18.0558C47.1938 27.2151 54.6189 34.6664 63.746 34.6664C72.873 34.6664 80.2981 27.2151 80.2981 18.0558C80.2981 8.89652 72.873 1.44522 63.746 1.44522ZM75.4852 18.0558C75.4852 24.5499 70.2172 29.8365 63.746 29.8365C57.2748 29.8365 52.0067 24.5499 52.0067 18.0558C52.0067 11.5617 57.2748 6.27512 63.746 6.27512C70.2172 6.27512 75.4852 11.5617 75.4852 18.0558Z"
                  fill="black"
                />
                <path
                  d="M223.388 1.44522C214.261 1.44522 206.836 8.89652 206.836 18.0558C206.836 27.2151 214.261 34.6664 223.388 34.6664C232.515 34.6664 239.941 27.2151 239.941 18.0558C239.941 8.89652 232.515 1.44522 223.388 1.44522ZM235.128 18.0558C235.128 24.5499 229.86 29.8365 223.388 29.8365C216.917 29.8365 211.649 24.5499 211.649 18.0558C211.649 11.5617 216.917 6.27512 223.388 6.27512C229.86 6.27512 235.128 11.5617 235.128 18.0558Z"
                  fill="black"
                />
                <path
                  d="M134.587 2.15219L128.695 2.15219L115.285 18.3186L115.285 2.15219L110.51 2.15219L110.51 33.9281L115.285 33.9281L115.285 26.2016L119.649 20.7648L128.739 33.9281L134.474 33.9281L122.729 16.9234L134.587 2.15219Z"
                  fill="black"
                />
                <path
                  d="M166.569 17.2112C164.617 16.3416 162.616 15.8661 160.671 15.4094C158.932 14.9965 157.286 14.6086 155.771 13.9642C154.823 13.5637 154.406 12.7754 154.219 12.1936C153.888 11.1425 154.038 9.91005 154.611 8.97785C155.771 7.09469 158.265 6.23758 160.21 6.05614C163.601 5.74958 166.787 7.16351 168.314 9.64728L168.645 10.1853L172.279 7.93304L171.949 7.395C169.574 3.53484 164.817 1.3326 159.823 1.78306C155.97 2.13342 152.66 3.97278 150.97 6.71931C149.736 8.72134 149.424 11.2489 150.141 13.4949C150.79 15.5408 152.199 17.1111 154.106 17.9182C155.958 18.7002 157.853 19.1507 159.692 19.5886C161.519 20.0203 163.246 20.4332 164.836 21.1339C166.413 21.8346 167.56 22.9483 167.971 24.1745C168.308 25.1818 168.165 26.2704 167.541 27.409C166.245 29.7677 163.071 30.1681 161.768 30.2244C158.321 30.3933 154.898 28.8918 152.398 26.1202L151.974 25.651L148.807 28.5289L149.231 28.9981C152.317 32.4141 156.413 34.3723 160.765 34.5162C160.927 34.5162 161.089 34.5225 161.257 34.5225C161.494 34.5225 161.737 34.5225 161.974 34.5037C166.251 34.3035 169.648 32.4704 171.294 29.4736C172.504 27.2714 172.759 24.9628 172.036 22.7981C171.232 20.3957 169.293 18.4124 166.581 17.2049L166.569 17.2112Z"
                  fill="black"
                />
                <path
                  d="M100.778 22.1099C100.585 21.8972 100.391 21.6845 100.173 21.4718C103.197 19.5636 105.061 16.1914 105.061 12.6128C105.061 6.84445 100.385 2.15845 94.6433 2.15845L82.7108 2.15845L82.7108 33.9469L87.4676 33.9469L87.4676 23.0671L94.6433 23.0671C94.9176 23.0671 95.1981 23.0546 95.5036 23.0296C96.4637 23.8742 97.2679 24.7126 97.6919 25.2256C99.8489 27.7969 102.068 32.2765 102.698 33.5903L102.873 33.9469L108.128 33.9469L107.661 33.0272C105.491 28.7479 103.608 25.2256 100.778 22.1099ZM100.117 12.6128C100.117 15.6409 97.6607 18.1059 94.6433 18.1059L87.6546 18.1059L87.6546 7.11347L94.6433 7.11347C97.6607 7.11347 100.117 9.57847 100.117 12.6065L100.117 12.6128Z"
                  fill="black"
                />
                <path
                  d="M255.582 2.15219L243.65 2.15219L243.65 33.9469L248.407 33.9469L248.407 23.0671L255.582 23.0671C261.33 23.0671 266 18.3749 266 12.6128C266 6.8507 261.324 2.15845 255.582 2.15845L255.582 2.15219ZM261.056 12.6065C261.056 15.6346 258.6 18.0996 255.582 18.0996L248.594 18.0996L248.594 7.11347L255.582 7.11347C258.6 7.11347 261.056 9.57847 261.056 12.6065Z"
                  fill="black"
                />
                <path
                  d="M142.13 12.8443L138.371 12.8443L138.371 16.254L132.972 16.254L132.972 20.0265L138.371 20.0265L138.371 23.4363L142.13 23.4363L142.13 20.0265L147.529 20.0265L147.529 16.254L142.13 16.254L142.13 12.8443Z"
                  fill="black"
                />
              </svg>
            </div>
          </a>
          {footerIcon && (
            <div className={styles.icon}>
              <div className={styles.footerIcon}>
                {footerIcon && <ImageOrSvg image={footerIcon} />}
              </div>
            </div>
          )}
          {!parallax && renderSocial()}
        </div>
        {parallax && (
          <div className={styles.parallaxFooter} ref={socialFooter}>
            <div className={styles.socialContainer} ref={socialContainer}>
              <div className={styles.followTitle}>
                <svg viewBox="0 0 216.9 70.3">
                  <path d="M10.8,57.3l6.2-6.8l1.8,1.6l-6.2,6.8l7.7,7.1l-2,2.2L1,52.3l9.4-10.2l1.6,1.9l-7.1,7.8L10.8,57.3z" />
                  <path d="M40.4,48.3c-4.6,3.3-9.8,1.1-14-4.8c-4.1-5.8-4.7-11.6-0.1-14.9c4.6-3.3,9.9-1,14.1,4.8    C44.5,39.2,45,45,40.4,48.3L40.4,48.3z M27.7,30.6c-3.2,2.3-2.5,6,1.1,11.1c3.7,5.1,7,6.8,10.1,4.5c3.2-2.3,2.6-5.9-1.1-11    C34.2,30.1,30.9,28.3,27.7,30.6z" />
                  <path d="M46.8,16.7l2.7-1.2l8.4,19.1l9.8-4.3l0.7,2.5l-12.2,5.4L46.8,16.7L46.8,16.7z" />
                  <path d="M74.3,6.6l2.9-0.6l4.3,20.4l10.5-2.2l0.2,2.6l-13,2.7L74.3,6.6z" />
                  <path d="M108.7,26.4c-5.7-0.1-8.5-4.9-8.4-12.2c0.1-7.1,3.1-12.1,8.8-12c5.7,0.1,8.5,5,8.4,12.3    C117.4,21.5,114.4,26.5,108.7,26.4z M109,4.6c-4-0.1-5.6,3.3-5.7,9.6c-0.1,6.3,1.5,9.6,5.4,9.7c4,0.1,5.6-3.3,5.7-9.5    C114.5,8.2,113,4.7,109,4.6L109,4.6z" />
                  <path d="M139.3,29.8l-3.8-0.8l1-17.9l-6.3,16.8l-3.9-0.8l1.6-23.7l2.9,0.6l-1.7,20.3l6.4-16.6l3.5,0.7l-1,17.7    L144.9,7l2.7,0.6L139.3,29.8L139.3,29.8z" />
                  <path d="M187.9,46.4c-2.8,3.9-7.1,4.7-11,1.9c-3.9-2.8-4.4-7.1-1.6-11l9.3-12.9l2.4,1.7l-9.3,13    c-2.1,2.9-1.7,5.3,0.8,7.1c2.5,1.8,4.9,1.4,7-1.5l9.3-13l2.4,1.8L187.9,46.4L187.9,46.4z" />
                  <path d="M194.7,64.1c-2.3-2.5-3.5-5.3-3.4-8.1l2.7,0c0,2.2,0.6,4.4,2.5,6.5c1.9,2.1,4.7,3.1,6.9,1.1    c1.7-1.5,1.8-3.1-0.1-6.9c-2.1-4.4-2.8-7.6-0.1-10.2c2.6-2.4,6.6-1.8,9.6,1.5c2.2,2.4,3,4.7,3.1,7.4h-2.6c0-2.2-0.9-4.1-2.2-5.6    c-1.8-1.9-4-2.7-5.7-1.1c-1.5,1.4-1.3,3.1,0.8,7.3c1.7,3.4,2.7,6.8-0.5,9.8C202.6,68.5,198.4,68.1,194.7,64.1L194.7,64.1z" />
                </svg>
              </div>
              {renderSocial()}
            </div>
          </div>
        )}
      </footer>
    </>
  );
};
